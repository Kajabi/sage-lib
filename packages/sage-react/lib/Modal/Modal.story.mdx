import { ArgsTable, Canvas, Meta, Source, Story } from '@storybook/addon-docs';

import { useEffect, useState }  from 'react';

import { Button } from '../Button';
import { Icon } from '../Icon';
import { Modal } from './Modal'
import { SageClassnames, SageTokens } from '../configs';

import { disableArgs, selectArgs } from '../story-support/helpers';

<Meta
 title="Sage/Modal"
 component={Modal}
 subcomponents={{
  'Modal.Header': Modal.Header,
  'Modal.HeaderAside': Modal.HeaderAside,
  'Modal.Body': Modal.Body,
  'Modal.Footer': Modal.Footer,
  'Modal.FooterAside': Modal.FooterAside,
 }}
 args={{
    animation: Modal.ANIMATION_PRESETS,
  }}
 argTypes={{
    ...disableArgs(['children', 'onExit']),
    ...selectArgs({
      size: Modal.SIZES,
    })
 }}
/>

# Properties
<ArgsTable of="Default" />

export const DefaultBody = ({ onExit }) => (
  <>
    <Modal.Header
      title="Modal header"
      aside={(
        <Button
          color={Button.COLORS.SECONDARY}
          iconOnly={true}
          icon={SageTokens.ICONS.REMOVE}
          onClick={onExit}
          subtle={true}
        >
          Menu
        </Button>
      )}
    />
    <Modal.Body gap={Modal.Body.GAP_OPTIONS.LG}>
      <p className={SageClassnames.TYPE.BODY}>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit,
        sed do eiusmod tempor incididunt ut labore et dolore
        magna aliqua.
      </p>
      <p className={SageClassnames.TYPE.BODY}>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit,
        sed do eiusmod tempor incididunt ut labore et dolore
        magna aliqua.
      </p>
    </Modal.Body>
    <Modal.Footer>
      <Button
        color={Button.COLORS.SECONDARY}
        onClick={onExit}
      >
        Cancel
      </Button>
      <Button
        color={Button.COLORS.PRIMARY}
        onClick={onExit}
      >
        Confirm
      </Button>
    </Modal.Footer>
  </>
);

export const Template = (args) => {
  const [active, setActive] = useState(false);
  const [isClosing, setIsClosing] = useState(false);
  const onExit = () => {
    setIsClosing(true);
    setTimeout(() => {
      setActive(false);
      setIsClosing(false);
    }, 1000);
  };
  return (
    <>
      <Button
        color={Button.COLORS.PRIMARY}
        onClick={() => setActive(true)}
      >
        Open Modal
      </Button>
      <Modal {...args}
        active={active}
        isClosing={isClosing}
        animation={false}
        onExit={onExit}>
        <DefaultBody onExit={onExit} />
      </Modal>
    </>
  );
};

## Variants

### Default
Default modals contain a title, a body of content, and a footer with buttons.
<Canvas>
  <Story name="Default"
    args={{
      active: true
    }}>
    { Template.bind({}) }
  </Story>
</Canvas>

### Sizes
Modal widths can be configured to be extra small, small, medium, or large.
<Canvas>
  <Story name="Sizes"
    args={{
      size: Modal.SIZES.LG
    }}>
    { Template.bind({}) }
  </Story>
</Canvas>

### Fullscreen
Modals can be configured to take up the full screen.
<Canvas>
  <Story name="Fullscreen"
    args={{
      fullScreen: true
    }}>
    { Template.bind({}) }
  </Story>
</Canvas>

### Scrollable Content
Modals can be configured to allow scrolling of content. This option is useful when the header and footer needs to visible contain actions.
<Canvas>
  <Story name="Scrollable Content"
    args={{
      allowScroll: true
    }}>
    { Template.bind({}) }
  </Story>
</Canvas>

## Header Variants
### Header Icon

### Header Image

### Subheader

## Footer Variants
### Footer
Modals contain a footer that can contain buttons and links

### Footer Aside
The footer aside is a section of the footer that can contain additional buttons or links.



The Modal allows us to format a modal window according to Sage design specs and includes the following features:

- `Modal.Header` -- Formats the header of the modal. Can also include a `Modal.Header.Aside` for an optional element in the upper-right of the modal.
- `Modal.Body` -- Minimal requirement to properly format the contents of the Modal.
- `Modal.Footer` -- Formats the footer of the modal. Can also include a `Modal.Footer.Aside` for an optional element in the lower-left of the modal.