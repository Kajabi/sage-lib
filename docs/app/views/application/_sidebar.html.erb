<%= sage_component SageSidebar, { id: "sage-sidebar-menu" } do %>
  <% if current_page_content? %>
    <%= sage_component SageNav, {
      items: [
        { link: pages_content_path(:voice_tone), text: "CONTENT", items: [
          {
            text: "Voice & Tone",
            link: pages_content_path(:voice_tone),
            active: current_page?(pages_content_path(:voice_tone)),
          },
          {
            text: "Grammar",
            link: pages_content_path(:grammar),
            active: current_page?(pages_content_path(:grammar)),
          },
        ] }
      ]
    } %>
  <% end %>
  <% if current_page_design? %>
    <%= sage_component SageNav, {
      items: [
        { link: pages_design_path(:color), text: "DESIGN", items: [
          {
            text: "Colors",
            link: pages_design_path(:color),
            active: current_page?(pages_design_path(:color)),
          },
          {
            text: "Typography",
            link: pages_design_path(:typography),
            active: current_page?(pages_design_path(:typography)),
          },
          {
            text: "Icons",
            link: pages_design_path(:icon),
            active: current_page?(pages_design_path(:icon)),
          },
          {
            text: "Motion",
            link: pages_design_path(:motion),
            active: current_page?(pages_design_path(:motion)),
          }
        ] }
      ]
    } %>
  <% end %>
  <% if current_page_layout? %>
    <%= sage_component SageNav, {
      items: [
        { link: pages_layout_path(:container), text: "LAYOUT", items: [
          {
            text: "Containers",
            link: pages_layout_path(:container),
            active: current_page?(pages_layout_path(:container)),
          },
          {
            text: "Panels and Cards",
            link: pages_layout_path(:panels_cards),
            active: current_page?(pages_layout_path(:panels_cards)),
          },
          {
            text: "Spacing",
            link: pages_layout_path(:spacing),
            active: current_page?(pages_layout_path(:spacing)),
          },
          {
            text: "12 Col Grid",
            link: pages_layout_path(:grid),
            active: current_page?(pages_layout_path(:grid)),
          },
          {
            text: "Grid Templates",
            link: pages_layout_path(:grid_templates),
            active: current_page?(pages_layout_path(:grid_templates)),
          }
        ] }
      ]
    } %>
  <% end %>
  <% if current_page_components? %>
    <%
      component_list = []
      sorted_sage_components.each do |component|
        component_list << {
          text: component[:title].titleize,
          link: pages_component_path(component[:title]),
          active: current_page?(pages_component_path(component[:title])),
        }
      end
    %>
    <%= sage_component SageNav, {
      items: [
        { link: pages_component_path(sorted_sage_components[0][:title]), text: "COMPONENTS", items: component_list }
      ]
    } %>
  <% end %>

  <%= content_for :sage_sidebar_footer do %>
    <%= sage_component SageNav, {
      aria_label: "Secondary",
      items: [
        {
          text: "Sandbox",
          link: pages_sandbox_path,
          active: current_page?(pages_sandbox_path),
        },
        {
          text: "Code Guidelines",
          link: "#{$SAGE_GITHUB_URL}",
          attributes: {
            target: "_blank",
            rel: "noopener noreferrer"
          }
        }
      ]
    } %>
  <% end %>
<% end %>
