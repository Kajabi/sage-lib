<%= sage_component SageContainer, { size: "sm" } do %>
  
  <%# TODO: Need a drawer or modal to house this content rather than Panel %>
  <%= sage_component SagePanel, {} do %>
    <%# --- Header --- %>
    <%= sage_component SagePanelRow, { grid_template: "te" } do %>
      <%= sage_component SageButton, {
        attributes: { href: "#TODO-open-full-profile" },
        value: "Open full profile",
        subtle: true,
        small: true,
        style: "secondary",
        icon: {
          name: "expand",
          style: "left",
        },
      } %>
      <%= sage_component SageButton, {
        attributes: { href: "#TODO-close-preview" },
        icon: {
          name: "remove",
          style: "only",
        },
        subtle: true,
        style: "secondary",
        value: "Close preview",
      } %>
    <% end %>
    <%# /-- Header --- %>

    <%# --- Profile --- %>
    <%= sage_component SagePanelBlock, { css_classes: SageClassnames::TYPE_ALIGN_CENTER } do %>
      <%= sage_component SageAvatar, {
        centered: true,
        image: {
          src: contact_profile_data[:avatar_image],
          alt: contact_profile_data[:name],
        },
        initials: contact_profile_data[:initials],
        size: "68px",
        spacer: { bottom: "sm" },
        # TODO: Add `badge` property
      } %>
      <h3 class="<%= SageClassnames::TYPE::HEADING_4 %> <%= SageClassnames::TYPE_COLORS::CHARCOAL_500 %>">
        <%= contact_profile_data[:name] %>
      </h3>
      <%= sage_component SageCopyButton, {
        value: contact_profile_data[:email],
        borderless: true,
      } %>
    <% end %>
    <%= sage_component SageButtonGroup, {
      gap: :sm,
      align: "center"
    } do %>
      <% contact_profile_button_bar_items.each do | btn | %>
        <%= sage_component SageButton, {
          value: btn[:label],
          style: "secondary",
          raised: false,
          icon: {
            style: "only",
            name: btn[:icon],
          },
          html_attributes: {
            "data-js-tooltip": btn[:label],
            href: btn[:href],
          },
        } %>
      <% end %>
      <%= sage_component SageDropdown, { items: contact_profile_more_options_items } do %>
        <%= sage_component SageButton, {
          value: "More",
          style: "secondary",
          raised: false,
          icon: {
            style: "only",
            name: "dot-menu-horizontal",
          },
          html_attributes: {
            "data-js-tooltip": "More",
          },
        } %>
      <% end %>
    <% end %>
    <%# /-- Profile --- %>

    <%# --- Data --- %>
    <% contact_profile_data[:user_stats].each do | data_group | %>
      <%= sage_component SageDescription, {
        allcaps_titles: false,
        inline_spread: true,
        items: data_group,
      } %>
      <%= sage_component SagePanelDivider, {} %>
    <% end %>
    <%= sage_component SageLabelGroup, { gap: :xs } do %>
      <% contact_profile_data[:tags].each do | tag | %>
        <%= sage_component SageLabel, { color: "draft", value: tag } %>
      <% end %>
      <%= sage_component SageButton, {
        attributes: {
          href: "#view-more",
        },
        style: "primary",
        subtle: true,
        value: "View all",
      } %>
    <% end %>
    <%# /-- Data --- %>
  <% end %>
<% end %>
