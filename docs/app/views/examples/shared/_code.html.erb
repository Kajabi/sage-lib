<div class="example__wrapper">

  <% if klass = "sage_#{title}".camelize.constantize rescue false %>
    <%= sage_component SageCard, { spacer: { bottom: :md } } do %>
      <%= sage_component SageCardHeader, { title: "Sage Component" } do %>
        <code><%= klass %></code>
      <% end %>
      <div class="example__code">
        <button class="example__expand-btn" aria-controls="example-rails-code-<%= title %>">Expand this code snippet</button>
        <div id="example-rails-code-<%= title %>" class="sage-code-snippet" tabindex="-1">
          <pre class="prettyprint"><code><%= File.read(File.join(Rails.root, "app/views/examples/", type.pluralize, title, "_preview.html.erb")) %></code></pre>
        </div>
      </div>
    <% end %>
    <%= sage_component SageCard, {} do %>
      <%= sage_component SageCardHeader, { title: "Attribute Schema"} do %>
        <code><%= klass %>::ATTRIBUTE_SCHEMA</code>
      <% end %>
      <div class="example__code">
        <button class="example__expand-btn" aria-controls="example-rails-code-<%= title %>">Expand this code snippet</button>
        <div id="example-rails-code-<%= title %>" class="sage-code-snippet" tabindex="-1">
          <pre class="prettyprint"><code><%= klass::ATTRIBUTE_SCHEMA.pretty_inspect %></code></pre>
        </div>
      </div>
    <% end %>
  <% else %>
    <%= sage_component SageAlert, {
      color: "info",
      title: "This component does not provide a SageRails class.",
    } %>
  <% end %>

  <%= sage_component SageCard, { spacer: { bottom: :md } } do %>
    <%= sage_component SageCardHeader, { title: "Generated HTML Code"} %>
    <div class="example__code">
      <button class="example__expand-btn" aria-controls="example-html-code-<%= title %>">Expand this code snippet</button>
      <div id="example-html-code-<%= title %>" class="sage-code-snippet" tabindex="-1">
        <pre class="prettyprint"><code><%= CGI.unescapeHTML(CGI.escapeHTML(render("examples/#{type.pluralize}/#{title}/preview"))) %></code></pre>
      </div>
    </div>
  <% end %>
</div>
