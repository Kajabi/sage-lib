<%
sample_data = [
  {
    value_1: "Venenatis Condimentum",
    value_2: "Ridiculus",
    value_3: "Sem Elit",
    value_4: "Nibh Aenean",
    value_5: "Sem Elit"
  },
  {
    value_1: "Nullam Porta",
    value_2: "Adipiscing Ligula",
    value_3: "Euismod Etiam",
    value_4: "Malesuada",
    value_5: "Etiam"
  },
  {
    value_1: "Ridiculus",
    value_2: "Cras Malesuada",
    value_3: "Commodo",
    value_4: "Cursus Pharetra",
    value_5: "Fringilla"
  },
  {
    value_1: "Pharetra Mattis",
    value_2: "Magna",
    value_3: "Elit Inceptos",
    value_4: "Cursus Pharetra",
    value_5: "Dolor Fringilla"
  }
]
sample_table = {
  headers: [
    "Cras Porta",
    "Dapibus Ridiculus",
    "Purus",
    "Mollis",
    "Ridiculus"
  ],
  rows: sample_data
}
%>

<h3 class="t-sage-heading-6">Responsive table</h3>
<%= sage_component SageTable, {
  headers: sample_table[:headers],
  rows: sample_table[:rows],
  caption: "Responsive tables require the use of two parent containers",
} %>

<h3 class="t-sage-heading-6">Striped table</h3>
<%= sage_component SageTable, {
  headers: sample_table[:headers],
  rows: sample_table[:rows],
  caption: "Striped tables display a background color on odd-numbered rows",
  striped: true
} %>

<h3 class="t-sage-heading-6">Table with highlighted rows and block cells</h3>
<%= sage_component SageTable, {
  caption: %(
    Block cells can be used with anchor tags to link the entire cell, or <code>&lt;div&gt;</code> and <code>&lt;span&gt;</code> elements for content
  ),
  headers: [
    "Mattis",
    "Justo Inceptos"
  ],
  selectable: true,
  striped: true,
  responsive: false,
  rows: [
    [
      %(
        <a href="#" class="sage-table-cell__block sage-table-cell__link">
          <div class="sage-table-cell__heading">
            <p class="sage-table-cell__title">First item</p>
            <span class="sage-table-cell__label sage-label sage-label--success">Accepted</span>
          </div>
          <div class="sage-table-cell__body">
            Maecenas sed diam eget risus varius blandit sit amet non
          </div>
        </a>
      ),
      %(<a href="#" class="sage-table-cell__link">Porta Ipsum</a>)
    ],
    [
      %(
        <a href="#" class="sage-table-cell__block sage-table-cell__link">
          <div class="sage-table-cell__heading">
            <p class="sage-table-cell__title">Second item</p>
            <span class="sage-table-cell__label sage-label sage-label--warning">On hold</span>
          </div>
          <div class="sage-table-cell__body">
            Pellentesque ornare sem lacinia quam venenatis vestibulum
          </div>
        </a>
      ),
      %(<a href="#" class="sage-table-cell__link">Dapibus Vulputate</a>)
    ]
  ]
} %>

<h3 class="t-sage-heading-6">Striped table with selectively truncated cells</h3>
<p>Individual cells should be assigned the <code>.sage-table-cell--truncate</code> class. Not suggested for use with long strings of <em>important</em> text: use the responsive (scrolling) table instead.</p>
<%= sage_component SageTable, {
  headers: [
    "Malesuada",
    "Amet Cras",
    "Consectetur",
  ],
  striped: true,
  rows: [
    [
      %(<span class="sage-table-cell__label sage-label sage-label--danger">Warning</span>),
      "$20,323.30 USD",
      {
        value: "Sed posuere consectetur",
        html_attributes: {
          class: "sage-table-cell--truncate"
        }
      }
    ],
    [
      %(<span class="sage-table-cell__label sage-label sage-label--draft">Draft</span>),
      "$1,101,444.31 USD",
      {
        value: "Curabitur blandit tempus",
        html_attributes: {
          class: "sage-table-cell--truncate"
        }
      }
    ]
  ]
} %>

<h3 class="t-sage-heading-6">Hiding and showing cell content</h3>
<p>Individual cells can make use of the <a href="<%= pages_design_path(:grid) %>">Sage Grid</a> classes for responsive display of content. Refer to the <a href="<%= pages_design_path(:icon) %>#grid-responsive-show-hide">Grid documentation</a> for more details.</p>
<p>Remember to apply the same classes equally to <strong>all related vertical columns</strong>, or the structure of the table will be misaligned.</p>
<%= sage_component SageTable, {
  headers: [
    "Malesuada",
    "Amet Cras",
    { html_attributes: { class: "sage-col--sm-hide" }, value: %(Hidden &lt; <code>sm</code> breakpoint) },
    { html_attributes: { class: "sage-col--lg-hide" }, value: %(Hidden &lt; <code>lg</code> breakpoint) },
  ],
  selectable: true,
  rows: [
    [
      "Donec sed odio dui",
      %(<span class="sage-table-cell__label sage-label sage-label--draft">Draft</span>),
      { html_attributes: { class: "sage-col--sm-hide" }, value: "Lorem Tristique" },
      { html_attributes: { class: "sage-col--lg-hide" }, value: "Cras justo odio, dapibus ac facilisis" },
    ],
    [
      "Nulla non metus",
      %(<span class="sage-table-cell__label sage-label sage-label--success">Complete</span>),
      { html_attributes: { class: "sage-col--sm-hide" }, value: "Euismod Dapibus" },
      { html_attributes: { class: "sage-col--lg-hide" }, value: "Curabitur blandit tempus" },
    ]
  ]
} %>

<h3>Using `sage_table_for`</h3>
<%= md("
As an alterative to directly calling the SageTable component,
a helper variation is available that allows for formatting table columns
in a more compositional fashion. This involves calling `sage_table_for` with a collection,
and then using `t.column ... do |c|` blocks to provide templates for each column of data.
See the \"Properties\" tab for documentation of the available parameters.

**NOTE:** This is an MVP implementation based on a helper written earlier for `kajabi-products`
and not completely aligned with SageTable yet.
It is safe to use, but should be tracked against future updates.
") %>

<%= sage_table_for sample_data, striped: true, sortable: true, responsive: true do |t| %>
  <% t.column :value_1, label: "Cras Porta", data_type: "string" do |c| %>
    <%= sage_component SageButton, {
      subtle: true,
      style: "primary",
      value: c[:value_1],
      attributes: {
        href: "#test",
      },
    } %>
  <% end %>
  <% t.column :value_2, label: "Dapibus Ridiculus" do |c| %>
    <strong><%= c[:value_2] %></strong>
    <%= c[:value_3] %>
  <% end %>
  <% t.column :actions, label: "Actions", data_type: "string" do |c| %>
    <%= sage_component SageButtonGroup, {} do %>
      <%= sage_component SageButton, {
        subtle: true,
        value: 'Edit',
        icon: { name: 'pen', style: 'only' },
        style: 'primary',
        attributes: {
          href: "?edit=#edit"
        }
      } %>
      <%= sage_component SageButton, {
        subtle: true,
        value: 'Delete',
        icon: { name: 'trash', style: 'only' },
        style: 'danger',
        attributes: {
          href: "?remove=#delete"
        }
      } %>
    <% end %>
  <% end %>
<% end %>
