<div 
  class="
    sage-popover
    <%= component.css_classes %>
    <%= component.generated_css_classes %>
  " 
  data-js-popover 
  data-js-popover--position="<%= component.popover_position ? component.popover_position : "right" %>"
  <%= component.generated_html_attributes.html_safe %>
>

  <% if component.trigger_icon_only %>
    <%= sage_component SageButton, {
      value: component.trigger_value,
      style: "secondary",
      css_classes: "sage-popover__button",
      subtle: true,
      icon: {
        style: "only",
        name: component.icon
      },
      attributes: {
        "aria-haspopup": true,
        "aria-controls": "sage-popover",
        "aria-expanded": false,
        "data-js-popover--trigger": "",
      },
    } %>
  <% else %>
    <%= sage_component SageButton, {
      value: component.trigger_value,
      style: "secondary",
      css_classes: "sage-popover__button",
      subtle: true,
      icon: {
        style: "left",
        name: component.icon
      },
      attributes: {
        "aria-haspopup": true,
        "aria-controls": "sage-popover",
        "aria-expanded": false,
        "data-js-popover--trigger": ""
      },
    } %>
  <% end %>

  <div class="sage-popover__overlay" data-js-popover--overlay></div>

  <div class="sage-popover__panel">
    <% if component.title.present? %>
      <div class="sage-popover__title">
        <%= component.title %>
      </div>
    <% end %>
    <div class="
        sage-popover__content
        <%= "sage-popover__content--custom #{component.custom_content_class}" if component.custom_content_class.present? %>
      "
    >
      <%= component.content %>
    </div>
    <% if component.link %>
      <div class="sage-popover__actions">
        <%= sage_component SageButton, {
          value: component.link[:name],
          style: "primary",
          subtle: true,
          icon: {
            style: "right",
            name: "launch"
          },
          attributes: {
            href: component.link[:href],
            target: "_blank",
            rel: "noreferrer noopener"
          }
        } %>
      </div>
    <% end %>
  </div>

</div>
